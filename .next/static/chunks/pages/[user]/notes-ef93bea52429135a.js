(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{9474:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(9013);function n(e,t){if(arguments.length<2)throw TypeError("2 arguments required, but only "+arguments.length+" present");var s=(0,r.Z)(e),n=(0,r.Z)(t),a=s.getTime()-n.getTime();return a<0?-1:a>0?1:a}},3855:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(3946),n=s(4262),a={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,l=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,o=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only "+arguments.length+" present");var s,c,x=t||{},f=null==x.additionalDigits?2:(0,r.Z)(x.additionalDigits);if(2!==f&&1!==f&&0!==f)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var p=function(e){var t,s={},r=e.split(a.dateTimeDelimiter);if(/:/.test(r[0])?(s.date=null,t=r[0]):(s.date=r[0],t=r[1],a.timeZoneDelimiter.test(s.date)&&(s.date=e.split(a.timeZoneDelimiter)[0],t=e.substr(s.date.length,e.length))),t){var n=a.timezone.exec(t);n?(s.time=t.replace(n[1],""),s.timezone=n[1]):s.time=t}return s}(e);if(p.date){var g=function(e,t){var s=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(s);if(!r)return{year:null};var n=r[1]&&parseInt(r[1]),a=r[2]&&parseInt(r[2]);return{year:null==a?n:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(p.date,f);s=function(e,t){if(null===t)return null;var s,r,n=e.match(i);if(!n)return null;var a=!!n[4],l=d(n[1]),o=d(n[2])-1,c=d(n[3]),m=d(n[4]),x=d(n[5])-1;if(a)return m>=1&&m<=53&&x>=0&&x<=6?((s=new Date(0)).setUTCFullYear(t,0,4),r=s.getUTCDay()||7,s.setUTCDate(s.getUTCDate()+((m-1)*7+x+1-r)),s):new Date(NaN);var f=new Date(0);return o>=0&&o<=11&&c>=1&&c<=(u[o]||(h(t)?29:28))&&l>=1&&l<=(h(t)?366:365)?(f.setUTCFullYear(t,o,Math.max(l,c)),f):new Date(NaN)}(g.restDateString,g.year)}if(isNaN(s)||!s)return new Date(NaN);var y=s.getTime(),j=0;if(p.time&&(isNaN(j=function(e){var t=e.match(l);if(!t)return null;var s=m(t[1]),r=m(t[2]),n=m(t[3]);return(24===s?0===r&&0===n:n>=0&&n<60&&r>=0&&r<60&&s>=0&&s<25)?36e5*s+6e4*r+1e3*n:NaN}(p.time))||null===j))return new Date(NaN);if(p.timezone){if(isNaN(c=function(e){if("Z"===e)return 0;var t=e.match(o);if(!t)return 0;var s="+"===t[1]?-1:1,r=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return n>=0&&n<=59?s*(36e5*r+6e4*n):NaN}(p.timezone)))return new Date(NaN)}else{var N=y+j,v=new Date(N);c=(0,n.Z)(v);var w=new Date(N);w.setDate(v.getDate()+1);var b=(0,n.Z)(w)-c;b>0&&(c+=b)}return new Date(y+j+c)}function d(e){return e?parseInt(e):1}function m(e){return e&&parseFloat(e.replace(",","."))||0}var u=[31,null,31,30,31,30,31,31,30,31,30,31];function h(e){return e%400==0||e%4==0&&e%100}},9225:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[user]/notes",function(){return s(7503)}])},3979:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(2477);s(8408);var n=s(2009),a=s.n(n);function i(){return(0,r.jsx)("footer",{className:"opacity-100 py-12 px-8 absolute bottom-0 w-screen flex justify-center",children:(0,r.jsx)("div",{className:"flex justify-center items-center",children:(0,r.jsx)(a(),{src:"/daynotes-logo.png",alt:"Note icon",width:448,height:448,className:"w-28"})})})}},7903:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var r=s(2477),n=s(8408),a=s(2375),i=s.n(a),l=s(8366),o=s(3606),c=s(8861),d=s(2009),m=s.n(d);function u(e){let t="cursor-pointer ml-2 px-3 sm:px-3 py-2 flex justify-center items-center hover:bg-gray-200/70 transition-colors rounded-lg text-gray-900 tracking-wide font-regular mt-1 flex text-sm",s=(0,l.Z)(),{user:a}=(0,o.aF)(),{userData:d,setUserData:u}=(0,c.a)(),{userDoc:h}=e;async function x(e){await fetch("https://daynotes-client.vercel.app/api/users?email=".concat(e)).then(e=>e.json()).then(e=>{u(e.data)})}return(0,n.useEffect)(()=>{a&&!d&&x(a.email)},[a,d]),(0,n.useEffect)(()=>{},[h]),(0,r.jsxs)("nav",{className:"pt-4 pb-3 px-6 sm:px-12 flex justify-between items-center",children:[(0,r.jsx)(i(),{href:"/",children:(0,r.jsx)("div",{className:"cursor-pointer flex justify-center items-center",children:(0,r.jsx)(m(),{src:"/daynotes-logo.png",alt:"DayNotes logo",width:740,height:149,className:"mt-2 w-[125px] sm:w-[150px]"})})}),(0,r.jsxs)("ul",{className:"flex",children:[(0,r.jsx)(i(),{href:"/",children:(0,r.jsx)("li",{className:t,children:"Home"})}),void 0!==a&&(0,r.jsx)(i(),{href:"/".concat(a.email,"/").concat(s),children:(0,r.jsx)("li",{className:t,children:"Today"})}),a?(0,r.jsx)(i(),{href:"/".concat(a.email,"/notes"),children:(0,r.jsx)("li",{className:t,children:"Notes"})}):(0,r.jsx)("div",{}),(0,r.jsx)(i(),{href:"/about",children:(0,r.jsx)("li",{className:t,children:"About"})}),a&&d?(0,r.jsx)(i(),{href:"/".concat(a.nickname),children:(0,r.jsx)("li",{className:"cursor-pointer ml-1 px-3 sm:px-3 pt-2",children:(0,r.jsx)("div",{className:"hover:drop-shadow-md bg-blue-700 hover:opacity-100 opacity-90 transition-opacity cursor-pointer w-[30px] h-[30px] rounded-full flex justify-center items-center",children:(0,r.jsx)(m(),{src:"/user-icons".concat(d.userImage),alt:"User profile icon",width:448,height:512,className:"w-1/2 invert"})})})}):(0,r.jsx)(i(),{href:"/api/auth/login","data-testid":"login",children:(0,r.jsx)("li",{className:"ml-3 mt-1",children:(0,r.jsx)("button",{className:"border border-blue-700 hover:from-blue-700 hover:to-blue-700 from-blue-600 to-blue-700 transition-all bg-gradient-to-b px-3 py-2 text-sm text-white font-semibold tracking-wide rounded-md",children:"Sign Up"})})})]})]})}},7503:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return p},default:function(){return g}});var r=s(2477),n=s(8408),a=s(7903),i=s(3979),l=s(2009),o=s.n(l),c=s(9705),d=s(3169);function m(e){let{usersEmail:t,note:s,setDeleteConfirmed:a}=e,i=(0,d.useRouter)(),l=JSON.stringify(s.data.ops),[m,u]=(0,n.useState)(!1);function h(e){if(e){let t=e.match(/"insert":"([^"]*?)(?:\\n"|\\n})|[^"]*?"insert":"([^"]*)"/g),s=[];if(t)for(let r of t){let n=r.match(/"insert":"([^"]*)/);if(n){let a=n[1].replace(/\\n/g,"");s.push(a)}}return s.join(" ")}}async function x(e,t){await fetch("/api/notes",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,date:t})}).then(()=>{console.log("Note deleted")}).catch(e=>{console.log(e)})}return console.log(h(l)),console.log(l),(0,r.jsxs)("div",{className:"group mr-6 mb-3",children:[m?(0,r.jsx)("div",{}):(0,r.jsxs)("div",{className:"absolute",children:[(0,r.jsx)(o(),{src:"/circle-xmark.png",alt:"Delete note icon",width:512,height:512,className:"hover:opacity-90 opacity-70 cursor-pointer group-hover:block relative hidden w-6 h-6 z-30 bottom-[10px] left-[112px] sm:bottom-2.5 sm:left-[185px] rounded-full",onClick:()=>u(!0)}),(0,r.jsx)("div",{className:"group-hover:block relative hidden bg-boxBg rounded-full z-20 bottom-[34px] left-[112px] sm:bottom-[34px] sm:left-[185px] w-6 h-6"})]}),(0,r.jsx)("div",{className:"w-[125px] h-[200px] sm:w-[200px] sm:h-[275px] opacity-100 hover:opacity-100 bg-white hover:drop-shadow-md drop-shadow-sm cursor-pointer hover:border-gray-500 border-gray-400 border rounded-md",onClick:()=>m?null:i.push("/".concat(t,"/").concat(s.date)),children:(0,r.jsx)("p",{className:"h-[250px] text-ellipsis overflow-hidden overflow-y-hidden opacity-70 hover:opacity-100 transition-opacity text-blackHeading text-sm font-light py-3 px-3",children:m?(0,r.jsxs)("div",{className:"flex flex-col mt-12 justify-start items-center",children:[(0,r.jsx)("p",{className:"mb-4 text-blackHeading font-thin text-sm",children:"Delete note?"}),(0,r.jsxs)("div",{className:"flex justify-between items-center space-x-8",children:[(0,r.jsx)(o(),{src:"/check.png",width:448,height:304,alt:"Confirmation icon",className:"w-5 h-fit cursor-pointer opacity-40 hover:opacity-90 transition-opacity",onClick(){u(!1),x(s.userId,s.date),a(!0)}}),(0,r.jsx)(o(),{src:"/x.png",width:448,height:448,alt:"Cancellation icon",className:"w-4 h-fit cursor-pointer opacity-40 hover:opacity-90 transition-opacity",onClick:()=>u(!1)})]})]}):h(l)})}),(0,r.jsx)("div",{className:"h-10 mx-1 flex justify-center items-center",children:(0,r.jsx)("h3",{className:"text-blackHeading font-light",children:(0,c.Z)(new Date(s.date),"LLLL d, yyyy")})})]})}var u=s(9474),h=s(3855),x=s(9013);function f(e,t){if(arguments.length<2)throw TypeError("2 arguments required, but only "+arguments.length+" present");var s=(0,x.Z)(e),r=(0,x.Z)(t),n=s.getTime()-r.getTime();return n>0?-1:n<0?1:n}var p=!0;function g(e){let{userCtxt:t}=e,s="opacity-50 hover:opacity-100 flex cursor-pointer",l="opacity-100 flex cursor-pointer",[d,x]=(0,n.useState)(""),[p,g]=(0,n.useState)([]),[y,j]=(0,n.useState)([]),[N,v]=(0,n.useState)("date"),[w,b]=(0,n.useState)(!1),[D,Z]=(0,n.useState)(!1),[C,k]=(0,n.useState)(""),E=t.email;async function S(e){await fetch("https://daynotes-client.vercel.app/api/users?email=".concat(e)).then(e=>e.json()).then(e=>{x(e.data.userId),T(e.data.userId)})}async function T(e){await fetch("https://daynotes-client.vercel.app/api/notes?userId=".concat(e)).then(e=>e.json()).then(e=>{g(e.data)}).catch(e=>{console.log(e)})}let _=e=>{let t=e.target.value.toLowerCase();k(t)};(0,n.useEffect)(()=>{let e=p.filter(e=>{let{data:t,date:s}=e,r=JSON.stringify(t),n=JSON.stringify((0,c.Z)(new Date(s),"LLLL d, yyyy"));return r.toLowerCase().includes(C)||n.toLowerCase().includes(C)});j(e)},[p,C]);let H=[...p].sort((e,t)=>(0,u.Z)((0,h.Z)(e.date),(0,h.Z)(t.date))),L=[...p].sort((e,t)=>f((0,h.Z)(e.date),(0,h.Z)(t.date))),U=[...p].sort((e,t)=>f((0,h.Z)(e.lastUpdated),(0,h.Z)(t.lastUpdated))),I=[...y].sort((e,t)=>(0,u.Z)((0,h.Z)(e.date),(0,h.Z)(t.date))),z=[...y].sort((e,t)=>f((0,h.Z)(e.date),(0,h.Z)(t.date))),O=[...y].sort((e,t)=>f((0,h.Z)(e.lastUpdated),(0,h.Z)(t.lastUpdated)));return(0,n.useEffect)(()=>{S(E)},[]),(0,n.useEffect)(()=>{D&&(T(d),Z(!1))},[D]),(0,r.jsxs)("main",{className:"font-sans bg-gray-50 min-h-screen w-screen relative",children:[(0,r.jsx)(a.Z,{}),(0,r.jsx)("div",{className:"mx-2 sm:mx-8 flex flex-col justify-center items-center",children:(0,r.jsxs)("div",{className:"min-h-[85vh] border-boxBorder border drop-shadow-lg rounded-lg bg-slate-50 pb-20 w-full",children:[(0,r.jsx)("header",{className:"border-b border-headerBorder flex justify-between items-center pt-5 pb-4 px-4 sm:px-8",children:(0,r.jsx)("h2",{className:"text-2xl font-regular text-blackHeading",children:"Notes"})}),(0,r.jsxs)("section",{className:"flex justify-between items-start sm:items-center mx-4 sm:mx-8 mt-4 mb-4",children:[(0,r.jsxs)("div",{className:"text-sm mt-2 sm:mt-0 flex",children:[(0,r.jsx)("h3",{className:" mr-4 text-blackHeading font-light",children:"Sort by:"}),(0,r.jsxs)("div",{className:"date"==N?l:s,onClick(){"date"==N?b(!w):v("date")},children:[(0,r.jsx)("h3",{className:":text-sm cursor-pointer text-blackHeading font-light",children:"Date"}),(0,r.jsx)(o(),{src:"/arrow-down.png",alt:"Date sorting ascending or descending arrow",width:384,height:448,className:w?"rotate-180 cursor-pointer ml-1.5 mr-4 mt-0.5 w-3 opacity-70 h-fit":"cursor-pointer ml-1.5 mr-4 mt-0.5 w-3 opacity-70 h-fit"})]}),(0,r.jsx)("div",{className:"last-updated"==N?l:s,onClick:()=>v("last-updated"),children:(0,r.jsx)("h3",{className:"cursor-pointer text-blackHeading font-light",children:"Last Updated"})})]}),(0,r.jsxs)("div",{className:"flex sm:flex-row flex-col-reverse justify-center items-end sm:items-center",children:[(0,r.jsx)("p",{className:"mt-2 sm:mt-0 mr-2 sm:mr-4 text-xs sm:text-sm font-light text-grayHeading",children:p?1==p.length?"1 note made":p.length+" notes made":"0 notes made"}),(0,r.jsxs)("div",{className:"w-min h-10",children:[(0,r.jsx)("input",{type:"search",placeholder:"Search notes...",id:"searchInput",onChange:_,className:"text-sm pl-10 pr-4 font-light border-grayHeading border rounded-full h-10 w-48 md:w-72"}),(0,r.jsx)(o(),{src:"/search.png",alt:"search icon, magnifying glass",width:512,height:512,className:"w-4 relative left-[13px] md:left-[14px] bottom-[27px] opacity-60"})]})]})]}),(0,r.jsx)("div",{className:"mx-4 sm:mx-8 my-10 flex flex-wrap",children:p.length?y?"date"==N?w?I.length?I.map(e=>(0,r.jsx)(m,{note:e,setDeleteConfirmed:Z,usersEmail:E},e._id)):(0,r.jsx)("div",{className:"w-full flex justify-center items-center mt-48",children:(0,r.jsx)("h2",{className:"text-lg md:text-xl font-thin text-grayHeading",children:"No search results..."})}):z.length?z.map(e=>(0,r.jsx)(m,{note:e,setDeleteConfirmed:Z,usersEmail:E},e._id)):(0,r.jsx)("div",{className:"w-full flex justify-center items-center mt-48",children:(0,r.jsx)("h2",{className:"text-lg md:text-xl font-thin text-grayHeading",children:"No search results..."})}):O.length?O.map(e=>(0,r.jsx)(m,{note:e,setDeleteConfirmed:Z,usersEmail:E},e._id)):(0,r.jsx)("div",{className:"w-full flex justify-center items-center mt-48",children:(0,r.jsx)("h2",{className:"text-lg md:text-xl font-thin text-grayHeading",children:"No search results..."})}):"date"==N?w?H.map(e=>(0,r.jsx)(m,{note:e,setDeleteConfirmed:Z,usersEmail:E},e._id)):L.map(e=>(0,r.jsx)(m,{note:e,setDeleteConfirmed:Z,usersEmail:E},e._id)):U.map(e=>(0,r.jsx)(m,{note:e,setDeleteConfirmed:Z,usersEmail:E},e._id)):(0,r.jsx)("div",{className:"w-full flex justify-center items-center mt-48",children:(0,r.jsx)("h2",{className:"text-lg md:text-xl font-thin text-grayHeading",children:"No notes made yet!"})})})]})}),(0,r.jsx)(i.Z,{})]})}},3169:function(e,t,s){e.exports=s(531)}},function(e){e.O(0,[637,705,888,179],function(){return e(e.s=9225)}),_N_E=e.O()}]);
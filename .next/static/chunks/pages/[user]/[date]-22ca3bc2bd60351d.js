(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[237],{2878:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[user]/[date]",function(){return s(5861)}])},3979:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(2477);s(8408);var a=s(2009),r=s.n(a);function i(){return(0,n.jsx)("footer",{className:"opacity-100 py-12 px-8 absolute bottom-0 w-screen flex justify-center",children:(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsx)(r(),{src:"/daynotes-logo.png",alt:"Note icon",width:448,height:448,className:"w-28"})})})}},7903:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var n=s(2477),a=s(8408),r=s(2375),i=s.n(r),c=s(8366),l=s(3606),o=s(8861),d=s(2009),h=s.n(d);function u(e){let t="cursor-pointer ml-2 px-3 sm:px-3 py-2 flex justify-center items-center hover:bg-gray-200/70 transition-colors rounded-lg text-gray-900 tracking-wide font-regular mt-1 flex text-sm",s=(0,c.Z)(),{user:r}=(0,l.aF)(),{userData:d,setUserData:u}=(0,o.a)(),{userDoc:x}=e;async function m(e){await fetch("https://daynotes-client.vercel.app/api/users?email=".concat(e)).then(e=>e.json()).then(e=>{u(e.data)})}return(0,a.useEffect)(()=>{r&&!d&&m(r.email)},[r,d]),(0,a.useEffect)(()=>{},[x]),(0,n.jsxs)("nav",{className:"pt-4 pb-3 px-6 sm:px-12 flex justify-between items-center",children:[(0,n.jsx)(i(),{href:"/",children:(0,n.jsx)("div",{className:"cursor-pointer flex justify-center items-center",children:(0,n.jsx)(h(),{src:"/daynotes-logo.png",alt:"DayNotes logo",width:740,height:149,className:"mt-2 w-[125px] sm:w-[150px]"})})}),(0,n.jsxs)("ul",{className:"flex",children:[(0,n.jsx)(i(),{href:"/",children:(0,n.jsx)("li",{className:t,children:"Home"})}),void 0!==r&&(0,n.jsx)(i(),{href:"/".concat(r.email,"/").concat(s),children:(0,n.jsx)("li",{className:t,children:"Today"})}),r?(0,n.jsx)(i(),{href:"/".concat(r.email,"/notes"),children:(0,n.jsx)("li",{className:t,children:"Notes"})}):(0,n.jsx)("div",{}),(0,n.jsx)(i(),{href:"/about",children:(0,n.jsx)("li",{className:t,children:"About"})}),r&&d?(0,n.jsx)(i(),{href:"/".concat(r.nickname),children:(0,n.jsx)("li",{className:"cursor-pointer ml-1 px-3 sm:px-3 pt-2",children:(0,n.jsx)("div",{className:"hover:drop-shadow-md bg-blue-700 hover:opacity-100 opacity-90 transition-opacity cursor-pointer w-[30px] h-[30px] rounded-full flex justify-center items-center",children:(0,n.jsx)(h(),{src:"/user-icons".concat(d.userImage),alt:"User profile icon",width:448,height:512,className:"w-1/2 invert"})})})}):(0,n.jsx)(i(),{href:"/api/auth/login","data-testid":"login",children:(0,n.jsx)("li",{className:"ml-3 mt-1",children:(0,n.jsx)("button",{className:"border border-blue-700 hover:from-blue-700 hover:to-blue-700 from-blue-600 to-blue-700 transition-all bg-gradient-to-b px-3 py-2 text-sm text-white font-semibold tracking-wide rounded-md",children:"Sign Up"})})})]})]})}},5861:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return O},default:function(){return V}});var n=s(2477),a=s(8408),r=s(8907),i=s.n(r),c=s(3169),l=s(8366),o=s(7069),d=s(7349),h=s(9383),u=s(9295),x=s(7423),m=s(2699),f=s(313),p=s(3855),g=s(3151);s(2747);var y=s(3920),j=s(3606),w=s(2009),v=s.n(w),b=s(3703),N=s(9005),Z=s(584),k=s(7090),E=s(4135),C=s(4559),S=s(6801),L=s(9705),D=s(466),_=s(6843),M=s(1085),T=s(9160);function P(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function A(e){let{usersNotes:t,setSelectedDay:s,selectedDay:r,usersEmail:i,monthView:o}=e,d=(0,l.Z)(),h=(0,b.Z)(d),u=(0,c.useRouter)(),[x,m]=(0,a.useState)(r),[f,y]=(0,a.useState)(!1),j=(0,N.Z)({start:(0,Z.Z)((0,b.Z)(x)),end:(0,k.Z)((0,E.Z)(x))}),w=[];for(let A of t)w.push(A.date);return(0,n.jsx)("div",{children:t?(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsx)("section",{className:"w-full rounded-md",children:(0,n.jsx)("div",{className:"w-full flex justify-center items-center bg-gray-100/80 shadow-inner",children:(0,n.jsxs)("section",{className:"pt-1 pb-7",children:[(0,n.jsxs)("div",{className:"pl-3 pt-6 flex items-center",children:[(0,n.jsx)("h2",{className:"flex-auto text-2xl font-light text-blackHeading",children:(0,L.Z)(x,"MMMM yyyy")}),(0,n.jsxs)("button",{type:"button",onClick:function(){m((0,C.Z)(x,1))},className:"flex items-center justify-center px-1.5 text-gray-700 hover:text-gray-500",children:[(0,n.jsx)("span",{className:"sr-only",children:"Previous month"}),(0,n.jsx)(v(),{src:"/angle-left.png",width:210,height:369,alt:"Arrow",className:"h-3 w-2 opacity-60 hover:opacity-80 transition-opacity"})]}),(0,n.jsxs)("button",{onClick:function(){m((0,S.Z)(x,1)),console.log(x)},type:"button",className:"ml-2 flex flex-none items-center justify-center px-1.5 text-gray-700 hover:text-gray-500",children:[(0,n.jsx)("span",{className:"sr-only",children:"Next month"}),(0,n.jsx)(v(),{src:"/angle-left.png",width:210,height:369,alt:"Arrow",className:"h-3 w-2 opacity-60 hover:opacity-80 transition-opacity rotate-180"})]})]}),(0,n.jsxs)("div",{className:"tracking-wider text-gray-900 grid grid-cols-7 mt-4 text-sm font-medium leading-4 text-center",children:[(0,n.jsx)("div",{children:"SUN"}),(0,n.jsx)("div",{children:"MON"}),(0,n.jsx)("div",{children:"TUE"}),(0,n.jsx)("div",{children:"WED"}),(0,n.jsx)("div",{children:"THU"}),(0,n.jsx)("div",{children:"FRI"}),(0,n.jsx)("div",{children:"SAT"})]}),(0,n.jsx)("div",{className:"font-light border-[1px] drop-shadow-sm bg-[#f9fbfa] border-gray-300 grid grid-cols-7 my-2 text-md",children:j.map((e,t)=>(0,n.jsxs)("div",{className:P(0===t&&I[(0,D.Z)(e)],""),children:[(0,n.jsx)("button",{type:"button",onClick(){s(e),u.push("/".concat(i,"/").concat(e))},className:P((0,_.Z)(e,r)&&"bg-blue-100",!(0,_.Z)(e,r)&&(0,M.Z)(e)&&"bg-blue-200 font-semibold",!(0,_.Z)(e,r)&&!(0,M.Z)(e)&&(0,T.Z)(e,h)&&"text-gray-700",!(0,_.Z)(e,r)&&!(0,M.Z)(e)&&!(0,T.Z)(e,h)&&"text-gray-400",(0,_.Z)(e,r)&&(0,M.Z)(e)&&"font-semibold bg-blue-300",(0,_.Z)(e,r)&&!(0,M.Z)(e)&&"bg-blue-300",!(0,_.Z)(e,r)&&"hover:bg-gray-100 transition-colors",(0,_.Z)(e,r)&&(0,M.Z)(e)&&"bg-blue-200 font-semibold","font-regular text-sm flex pb-5 h-14 w-14 border-[0.5px] border-gray-300 items-center justify-center"),children:(0,n.jsx)("time",{dateTime:(0,L.Z)(e,"yyyy-MM-dd"),children:(0,L.Z)(e,"d")})}),(0,n.jsx)("div",{className:"relative bottom-5 h-0 w-14 flex justify-center",children:w.map(t=>(0,g.Z)((0,p.Z)(t),e)?(0,n.jsx)("div",{className:"relative w-2 h-2 rounded-full bg-blue-500"}):(0,n.jsx)("div",{}))})]},e.toString()))})]})})})}):(0,n.jsx)("div",{})})}let I=["","col-start-2","col-start-3","col-start-4","col-start-5","col-start-6","col-start-7"];var U=s(7903),R=s(3979);function F(e){let{tomorrow:t,yesterday:s,monthView:a,setMonthView:r,prevDay:i,nextDay:c,selectedDay:l,dateDifference:o,noteActivated:d}=e;return(0,n.jsxs)("section",{className:"flex flex-col items-center w-[8.5in] pt-8 pb-3",children:[(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-gray-500 text-sm font-light pb-2",children:o})}),(0,n.jsxs)("div",{className:"w-[78vw] lg:w-[8.5in] flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"mt-4 flex flex-col justify-center items-start",children:[(0,n.jsx)("button",{onClick:i,children:(0,n.jsx)(v(),{src:"/angle-left.png",width:210,height:369,alt:"Arrow",className:"scale-75 h-6 w-4 opacity-30 hover:opacity-50 transition-opacity "})}),(0,n.jsx)("p",{className:"w-max mt-2 text-gray-500 text-xs font-light",children:(0,L.Z)(new Date(s),"LLLL dd")})]}),(0,n.jsx)("section",{className:"flex justify-center items-center w-[8.5in] pb-8 ",children:(0,n.jsx)("div",{className:"flex-col flex justify-center items-center",children:d?(0,n.jsx)("h1",{className:"cursor-pointer text-black font-light text-4xl",onClick:()=>r(!a),children:(0,L.Z)(new Date(l),"LLLL d")}):(0,n.jsx)("h1",{className:"cursor-pointer text-gray-400 font-light text-4xl",onClick:()=>r(!a),children:(0,L.Z)(new Date(l),"LLLL d")})})}),(0,n.jsxs)("div",{className:"mt-4 flex flex-col justify-center items-end",children:[(0,n.jsx)("button",{onClick:c,children:(0,n.jsx)(v(),{src:"/angle-left.png",width:210,height:369,alt:"Arrow",className:"scale-75 h-6 w-4 opacity-30 hover:opacity-50 transition-opacity rotate-180"})}),(0,n.jsx)("p",{className:"mt-2 w-max text-gray-500 text-xs font-light",children:(0,L.Z)(new Date(t),"LLLL dd")})]})]})]})}let H=i()(()=>Promise.all([s.e(937),s.e(188)]).then(s.bind(s,3188)),{loadableGenerated:{webpack:()=>[3188]},ssr:!1});var O=!0;function V(e){let{userCtxt:t}=e,s=(0,c.useRouter)(),[r,i]=(0,a.useState)((0,l.Z)()),[w,b]=(0,a.useState)(""),[N,Z]=(0,a.useState)(),[k,E]=(0,a.useState)(),[C,S]=(0,a.useState)(!1),[L,D]=(0,a.useState)([]),[_,M]=(0,a.useState)(!1),[T,P]=(0,a.useState)("Today"),[I,O]=(0,a.useState)(!1),[V,B]=(0,a.useState)(!1),[X,G]=(0,a.useState)(null),Q=(0,o.Z)(new Date(r),1),W=(0,d.Z)(new Date(r),1),{user:q}=(0,j.aF)(),z=t.email,J=e=>{let t=e.split("/"),s=t[2],n=new Date(decodeURIComponent(s));return n},K=async()=>{let e=(0,y.io)("daynotes-server.onrender.com",{transports:["websocket"]});Z(e),B(!1),M(!0),await new Promise(e=>setTimeout(e,900)),en(w)},Y=async()=>{await N.emit("delete-note",w,r),M(!1),await new Promise(e=>setTimeout(e,500)),en(w)};(0,a.useMemo)(()=>{let e=(0,l.Z)(),t=Math.abs((0,h.Z)(e,r)),s=Math.abs((0,u.Z)(e,r)),n=Math.abs((0,x.Z)(e,r));0==t?P("Today"):0==s?(0,m.Z)(r,e)?1==t?P("1 day from now"):P("".concat(t," days from now")):1==t?P("1 day ago"):P("".concat(t," days ago")):s>=1&&0==n?(0,m.Z)(r,e)?1==s?P("1 week from now"):P("".concat(s," weeks from now")):(0,f.Z)(r,e)&&(1==s?P("1 week ago"):P("".concat(s," weeks ago"))):n>=1&&((0,m.Z)(r,e)?1==n?P("1 month from now"):P("".concat(n," months from now")):(0,f.Z)(r,e)&&(1==n?P("1 month ago"):P("".concat(n," months ago"))))},[r]);let $=()=>{i(Q),void 0!==q&&s.push("/".concat(z,"/").concat(Q))},ee=()=>{i(W),void 0!==q&&s.push("/".concat(z,"/").concat(W))},et=(e,t)=>{if(!e)return!1;{let s=e.map(e=>(0,p.Z)(e.date)).filter(e=>(0,g.Z)(e,t)),n=e.filter(e=>{let s=(0,p.Z)(e.date);return(0,g.Z)(s,t)}).map(e=>e.data.ops),a=n.length>0,r=s.length>0;return r&&a}};async function es(e){await fetch("https://daynotes-client.vercel.app/api/users?email=".concat(e)).then(e=>e.json()).then(e=>{b(e.data.userId),en(e.data.userId)}).catch(e=>{console.log(e)})}async function en(e){await fetch("https://daynotes-client.vercel.app/api/notes?userId=".concat(e)).then(e=>e.json()).then(e=>{D(e.data),console.log(e.data)}).catch(e=>{console.log(e)})}return(0,a.useEffect)(()=>{es(z)},[r]),(0,a.useEffect)(()=>{if(!L)return;let e=et(L,r);console.log(e),M(e)},[L,r]),(0,a.useEffect)(()=>{let e=J(s.asPath);e!==r&&i(e)},[]),(0,a.useEffect)(()=>{let e=(0,y.io)("daynotes-server.onrender.com",{transports:["websocket"]});return Z(e),et(L,r),()=>{e.disconnect()}},[s.asPath]),(0,a.useEffect)(()=>{null!=N&&null!=k&&_&&(N.once("load-document",e=>{k.setContents(e),k.enable(),console.log("Loading document...")}),N.emit("get-document",w,r))},[N,k,_]),(0,a.useEffect)(()=>{if(null==N||null==k)return;let e=setInterval(()=>{N.emit("save-document",k.getContents())},500);return()=>{clearInterval(e)}},[N,k]),(0,a.useEffect)(()=>{if(null==N||null==k)return;let e=e=>{k.updateContents(e)};return N.on("receive-changes",e),()=>{N.off("receive-changes",e)}},[N,k]),(0,a.useEffect)(()=>{if(null==N||null==k)return;let e=(e,t,s)=>{"user"===s&&N.id!==X&&(N.emit("send-changes",e),G(N.id))};return k.on("text-change",e),()=>{k.off("text-change",e)}},[N,k]),(0,a.useEffect)(()=>{V&&(Y(),B(!1))},[V]),(0,a.useEffect)(()=>{if(null==N||null==k)return;let e=()=>{N.disconnect()};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[N,k]),(0,n.jsxs)("main",{className:"font-sans bg-gray-50 min-h-screen w-screen relative",children:[(0,n.jsx)(U.Z,{}),(0,n.jsx)("div",{className:"mx-2 sm:mx-8 mt-0 pt-0 flex flex-col justify-center items-center",children:(0,n.jsxs)("div",{className:"rounded-lg bg-slate-50 border-boxBorder border drop-shadow-lg min-h-[100vh] mt-0 mb-32 w-full",children:[(0,n.jsxs)("div",{className:"px-4 pt-3 pb-2 flex justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(v(),{src:"/calendar.png",width:448,height:512,alt:"Calendar menu icon",className:"cursor-pointer w-5 mr-4 h-fit opacity-40 hover:opacity-70 transition-opacity",onClick:()=>S(!C)}),(0,n.jsx)("p",{className:"transition pt-0.5 text-sm font-light text-gray-500"})]}),_?I?(0,n.jsxs)("div",{className:"mr-1 flex justify-center items-center space-x-4",children:[(0,n.jsx)("p",{className:"text-gray-500 font-thin text-sm",children:"Delete note?"}),(0,n.jsx)(v(),{src:"/check.png",width:448,height:304,alt:"Confirmation icon",className:"w-5 h-fit cursor-pointer opacity-40 hover:opacity-70 transition-opacity",onClick(){O(!1),B(!0)}}),(0,n.jsx)(v(),{src:"/x.png",width:448,height:448,alt:"Cancellation icon",className:"w-4 h-fit cursor-pointer opacity-40 hover:opacity-70 transition-opacity",onClick:()=>O(!1)})]}):(0,n.jsx)("div",{className:"cursor-pointer opacity-40 hover:opacity-70 transition-opacity",children:(0,n.jsx)(v(),{src:"/trash-can.png",width:448,height:512,alt:"Delete note icon, trashcan",className:"w-[1.1rem] h-fit",onClick:()=>O(!0)})}):(0,n.jsx)("div",{})]}),C&&L?(0,n.jsx)(A,{usersEmail:z,usersNotes:L,selectedDay:r,setSelectedDay:i,monthView:C}):(0,n.jsx)("div",{}),(0,n.jsxs)("div",{className:"mb-32 flex flex-col justify-center items-center",children:[(0,n.jsx)(F,{monthView:C,setMonthView:S,noteActivated:_,dateDifference:T,selectedDay:r,prevDay:$,nextDay:ee,yesterday:Q,tomorrow:W}),_?(0,n.jsx)(H,{setQuill:E}):(0,n.jsx)("div",{className:"h-[5in] flex justify-center items-center font-light w-full",children:(0,n.jsx)("button",{className:"hover:text-gray-600 hover:border-gray-600 text-gray-400 text-lg flex items-center justify-center text-center w-16 h-16 pb-0.5 rounded-full border-[3px] font-bold border-gray-400",onClick:()=>K(),children:" +"})})]})]})}),(0,n.jsx)(R.Z,{})]})}}},function(e){e.O(0,[637,705,704,888,179],function(){return e(e.s=2878)}),_N_E=e.O()}]);